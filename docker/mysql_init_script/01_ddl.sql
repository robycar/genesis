-- Adminer 4.8.0 MySQL 8.0.25 dump

SET NAMES utf8;
SET time_zone = '+00:00';
SET foreign_key_checks = 0;
SET sql_mode = 'NO_AUTO_VALUE_ON_ZERO';

DROP TABLE IF EXISTS `OBP_TYPE_LINEA`;
DROP TABLE IF EXISTS `OUTBOUNDPROXY`;
DROP TABLE IF EXISTS `LINEE`;
DROP TABLE IF EXISTS `TYPE_LINEE`;
DROP TABLE IF EXISTS `AUTORIZZAZIONE_LEVEL`;
DROP TABLE IF EXISTS `AUTORIZZAZIONE_UTENZE`;
DROP TABLE IF EXISTS `UTENZE`;
DROP TABLE IF EXISTS `FUNZIONE`;
DROP TABLE IF EXISTS `LEVEL`;
DROP TABLE IF EXISTS `GRUPPO`;

CREATE TABLE `FUNZIONE` (
  `CODICE` varchar(20) NOT NULL,
  `NOME` varchar(150) NOT NULL,
  `DESCRIZIONE` varchar(1000) DEFAULT NULL,
  PRIMARY KEY (`CODICE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;

CREATE TABLE `GRUPPO` (
  `ID_GRUPPO` int NOT NULL AUTO_INCREMENT,
  `DESCRIZIONE` varchar(1000) DEFAULT NULL,
  `GRUPPO` varchar(50) NOT NULL,
  PRIMARY KEY (`ID_GRUPPO`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;

CREATE TABLE `LEVEL` (
  `ID_LEVEL` int NOT NULL AUTO_INCREMENT,
  `DESCRIZIONE` varchar(1000) DEFAULT NULL,
  `LEVEL` varchar(50) NOT NULL,
  PRIMARY KEY (`ID_LEVEL`),
  UNIQUE KEY `LEVEL_UQ` (`LEVEL`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;

CREATE TABLE `UTENZE` (
  `ID_UTENZA` int NOT NULL AUTO_INCREMENT,
  `USERNAME` varchar(25) NOT NULL,
  `PASSWORD` varchar(100) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `ID_LEVEL` int NOT NULL,
  `ID_GROUP` int NOT NULL,
  `NOME` varchar(50) NOT NULL,
  `COGNOME` varchar(50) NOT NULL,
  `AZIENDA` varchar(70) NOT NULL,
  `EMAIL` varchar(80) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  PRIMARY KEY (`ID_UTENZA`),
  KEY `ID_LEVEL` (`ID_LEVEL`),
  KEY `ID_GROUP` (`ID_GROUP`),
  CONSTRAINT `utenze_ibfk_3` FOREIGN KEY (`ID_LEVEL`) REFERENCES `LEVEL` (`ID_LEVEL`),
  CONSTRAINT `utenze_ibfk_4` FOREIGN KEY (`ID_GROUP`) REFERENCES `GRUPPO` (`ID_GRUPPO`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;


CREATE TABLE `AUTORIZZAZIONE_LEVEL` (
  `ID_LEVEL` int NOT NULL,
  `FUNZIONE_CODICE` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  PRIMARY KEY (`ID_LEVEL`,`FUNZIONE_CODICE`),
  KEY `FUNZIONE_CODICE` (`FUNZIONE_CODICE`),
  CONSTRAINT `autorizzazione_level_ibfk_2` FOREIGN KEY (`FUNZIONE_CODICE`) REFERENCES `FUNZIONE` (`CODICE`),
  CONSTRAINT `autorizzazione_level_ibfk_3` FOREIGN KEY (`ID_LEVEL`) REFERENCES `LEVEL` (`ID_LEVEL`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;

CREATE TABLE `AUTORIZZAZIONE_UTENZE` (
  `ID_UTENZA` int NOT NULL,
  `FUNZIONE_CODICE` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  PRIMARY KEY (`ID_UTENZA`,`FUNZIONE_CODICE`),
  KEY `FUNZIONE_CODICE` (`FUNZIONE_CODICE`),
  CONSTRAINT `autorizzazione_utenze_ibfk_1` FOREIGN KEY (`ID_UTENZA`) REFERENCES `UTENZE` (`ID_UTENZA`),
  CONSTRAINT `autorizzazione_utenze_ibfk_2` FOREIGN KEY (`FUNZIONE_CODICE`) REFERENCES `FUNZIONE` (`CODICE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;

CREATE TABLE `TYPE_LINEE` (
  `ID_TYPE_LINEA` int NOT NULL AUTO_INCREMENT ,
  `DESCRIZIONE` varchar(1000) NOT NULL,
  PRIMARY KEY (`ID_TYPE_LINEA`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;

CREATE TABLE `LINEE` (
  `ID_LINEA` int NOT NULL AUTO_INCREMENT,
  `NUMERO` varchar(20) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `ID_TYPE_LINEA` int NOT NULL,
  `IP_LINEA` varchar(39) NOT NULL,
  `PORTA` int NOT NULL,
  `PASSWORD` varchar(200) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL,
  PRIMARY KEY (`ID_LINEA`),
  KEY `ID_TYPE_LINEA` (`ID_TYPE_LINEA`),
  CONSTRAINT `linee_ibfk_1` FOREIGN KEY (`ID_TYPE_LINEA`) REFERENCES `TYPE_LINEE` (`ID_TYPE_LINEA`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;

CREATE TABLE `OBP_TYPE_LINEA` (
  `ID_OBP` int NOT NULL,
  `ID_TYPE_LINEA` int NOT NULL,
  KEY `ID_OBP` (`ID_OBP`),
  KEY `ID_TYPE_LINEA` (`ID_TYPE_LINEA`),
  CONSTRAINT `obp_type_linea_ibfk_1` FOREIGN KEY (`ID_OBP`) REFERENCES `OUTBOUNDPROXY` (`ID_OBP`) ON DELETE RESTRICT,
  CONSTRAINT `obp_type_linea_ibfk_2` FOREIGN KEY (`ID_TYPE_LINEA`) REFERENCES `TYPE_LINEE` (`ID_TYPE_LINEA`) ON DELETE RESTRICT
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;

CREATE TABLE `OUTBOUNDPROXY` (
  `ID_OBP` int NOT NULL AUTO_INCREMENT,
  `IP_DESTINAZIONE` varchar(1000) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `DESCRIZIONE` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT NULL,
  `PORTA` int NOT NULL,
  PRIMARY KEY (`ID_OBP`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci;





-- 2021-08-04 13:32:53
